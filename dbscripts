CREATE OR REPLACE VIEW V_TRANSACTION
AS
SELECT
A.TRANSACTION_ID
,F.COMPANY_NAME
,A.TRANSACTION_CREATED
,B.STATUS_NAME AS TRANSACTION_STATUS
,C.TYPE_NAME AS TRANSACTION_TYPE
,(SELECT SUM(D.WOOD_QTY * E.WOOD_PRICE) FROM TRANSACTION_DETAIL D INNER JOIN WOOD E ON D.WOOD_ID = E.WOOD_ID WHERE D.TRANSACTION_ID = A.TRANSACTION_ID) AS TOTAL
FROM TRANSACTION A
INNER JOIN TRANSACTION_STATUS B
ON A.TRANSACTION_STATUS = B.STATUS_ID
INNER JOIN TRANSACTION_TYPE C
ON A.TRANSACTION_TYPE = C.TYPE_ID
INNER JOIN CUSTOMER F
ON A.CUSTOMER_ID = F.CUSTOMER_ID

CREATE OR REPLACE VIEW V_TRANSACTION_DETAIL
AS
SELECT
A.TRANSACTION_ID
,B.WOOD_TYPE
,B.WOOD_LENGTH
,B.WOOD_WIDTH
,B.WOOD_HEIGHT
,A.WOOD_QTY
,(A.WOOD_QTY * B.WOOD_PRICE) AS TOTAL_PRICE
FROM TRANSACTION_DETAIL A
INNER JOIN WOOD B
ON A.WOOD_ID = B.WOOD_ID


SELECT WOOD_TYPE FROM V_TRANSACTION_DETAIL

SELECT A.TRANSACTION_ID, A.WOOD_ID, A.WOOD_QTY, B.WOOD_PRICE, (A.WOOD_QTY * B.WOOD_PRICE) AS TOTAL FROM TRANSACTION_DETAIL A
INNER JOIN WOOD B
ON A.WOOD_ID = B.WOOD_ID

SELECT * FROM TRANSACTION
SELECT * FROM V_TRANSACTION WHERE TRANSACTION_STATUS <> 'DELETED';
